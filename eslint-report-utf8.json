[{"filePath":"C:\\Users\\Sarbajit\\Desktop\\rajnikant\\ai-builder\\app\\admin\\login\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Sarbajit\\Desktop\\rajnikant\\ai-builder\\app\\api\\Projects\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Sarbajit\\Desktop\\rajnikant\\ai-builder\\app\\api\\Users\\route.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_password' is assigned a value but never used.","line":70,"column":23,"nodeType":null,"messageId":"unusedVar","endLine":70,"endColumn":32}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { NextResponse } from \"next/server\";\r\nimport { AppDataSource } from \"@/lib/db/data-source\";\r\nimport { User } from \"@/lib/db/entities/User\";\r\n\r\nimport bcrypt from \"bcryptjs\";\r\n\r\n/** \r\n * GET /api/users\r\n * Returns all users\r\n */\r\nexport async function GET() {\r\n  try {\r\n    const db = await AppDataSource();\r\n    const userRepo = db.getRepository(User);\r\n\r\n    const users = await userRepo.find({\r\n      select: [\"id\", \"email\", \"role\", \"createdAt\", \"updatedAt\"] // Don't return passwords\r\n    });\r\n\r\n    return NextResponse.json(users, { status: 200 });\r\n  } catch (error) {\r\n    console.error(\"GET /api/users error:\", error);\r\n    return NextResponse.json(\r\n      { error: \"Failed to fetch users\" },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n\r\n/**\r\n * POST /api/users\r\n * Creates a new user (Signup)\r\n */\r\nexport async function POST(req: Request) {\r\n  try {\r\n    const body = await req.json();\r\n\r\n    if (!body.email || !body.password) {\r\n      return NextResponse.json(\r\n        { error: \"Email and password are required\" },\r\n        { status: 400 }\r\n      );\r\n    }\r\n\r\n    const db = await AppDataSource();\r\n    const userRepo = db.getRepository(User);\r\n\r\n    const existing = await userRepo.findOne({\r\n      where: { email: body.email },\r\n    });\r\n\r\n    if (existing) {\r\n      return NextResponse.json(\r\n        { error: \"User already exists\" },\r\n        { status: 409 }\r\n      );\r\n    }\r\n\r\n    const hashedPassword = await bcrypt.hash(body.password, 10);\r\n\r\n    const user = userRepo.create({\r\n      email: body.email,\r\n      password: hashedPassword,\r\n      role: body.role ?? \"user\",\r\n    });\r\n\r\n    await userRepo.save(user);\r\n\r\n    // Return user without password\r\n    const { password: _password, ...userWithoutPassword } = user;\r\n    return NextResponse.json(userWithoutPassword, { status: 201 });\r\n  } catch (error) {\r\n    console.error(\"POST /api/users error:\", error);\r\n    return NextResponse.json(\r\n      { error: \"Failed to create user\" },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Sarbajit\\Desktop\\rajnikant\\ai-builder\\app\\api\\agent\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Sarbajit\\Desktop\\rajnikant\\ai-builder\\app\\api\\auth\\[...nextauth]\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Sarbajit\\Desktop\\rajnikant\\ai-builder\\app\\builder\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Sarbajit\\Desktop\\rajnikant\\ai-builder\\app\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Sarbajit\\Desktop\\rajnikant\\ai-builder\\app\\login\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Sarbajit\\Desktop\\rajnikant\\ai-builder\\app\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Sarbajit\\Desktop\\rajnikant\\ai-builder\\app\\preview\\frontend\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Sarbajit\\Desktop\\rajnikant\\ai-builder\\app\\signup\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Sarbajit\\Desktop\\rajnikant\\ai-builder\\components\\builder\\BuilderLayout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Sarbajit\\Desktop\\rajnikant\\ai-builder\\components\\builder\\ChatPanel.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Sarbajit\\Desktop\\rajnikant\\ai-builder\\components\\builder\\CodeEditor.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\Sarbajit\\Desktop\\rajnikant\\ai-builder\\components\\builder\\CodeEditor.tsx:28:7\n  26 |     const nextActiveFile = project.activeFile || filePaths[0] || null;\n  27 |     if (nextActiveFile !== activeFile) {\n> 28 |       setActiveFile(nextActiveFile);\n     |       ^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  29 |       setCurrentContent(nextActiveFile ? frontendFiles[nextActiveFile] || \"\" : \"\");\n  30 |       setIsDirty(false);\n  31 |     }","line":28,"column":7,"nodeType":null,"endLine":28,"endColumn":20},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\Sarbajit\\Desktop\\rajnikant\\ai-builder\\components\\builder\\CodeEditor.tsx:37:7\n  35 |   useEffect(() => {\n  36 |     if (activeFile && !currentContent && !isDirty) {\n> 37 |       setCurrentContent(frontendFiles[activeFile] || \"\");\n     |       ^^^^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  38 |     }\n  39 |   }, [activeFile, frontendFiles, currentContent, isDirty]);\n  40 |","line":37,"column":7,"nodeType":null,"endLine":37,"endColumn":24}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useState, useEffect, useMemo } from \"react\";\r\nimport Editor from \"@monaco-editor/react\";\r\nimport FileTree from \"./FileTree\";\r\nimport { ProjectState } from \"@/types/project\";\r\n\r\ninterface CodeEditorProps {\r\n  project: ProjectState;\r\n  onFileChange: (path: string, content: string) => void;\r\n  onActiveFileChange: (path: string | null) => void;\r\n}\r\n\r\nexport default function CodeEditor({ project, onFileChange, onActiveFileChange }: CodeEditorProps) {\r\n  const frontendFiles = useMemo(() => project.frontendFiles || {}, [project.frontendFiles]);\r\n  const filePaths = useMemo(() => Object.keys(frontendFiles), [frontendFiles]);\r\n\r\n  // Derive the active file and content from props\r\n  // We use internal state ONLY for when the user is typing (isDirty)\r\n  const [activeFile, setActiveFile] = useState<string | null>(project.activeFile || filePaths[0] || null);\r\n  const [currentContent, setCurrentContent] = useState(\"\");\r\n  const [isDirty, setIsDirty] = useState(false);\r\n\r\n  // Sync active file and content from parent ONLY when it actually changes from the outside\r\n  useEffect(() => {\r\n    const nextActiveFile = project.activeFile || filePaths[0] || null;\r\n    if (nextActiveFile !== activeFile) {\r\n      setActiveFile(nextActiveFile);\r\n      setCurrentContent(nextActiveFile ? frontendFiles[nextActiveFile] || \"\" : \"\");\r\n      setIsDirty(false);\r\n    }\r\n  }, [project.activeFile, filePaths, frontendFiles, activeFile]);\r\n\r\n  // Initial load or when activeFile changes internally (via FileTree)\r\n  useEffect(() => {\r\n    if (activeFile && !currentContent && !isDirty) {\r\n      setCurrentContent(frontendFiles[activeFile] || \"\");\r\n    }\r\n  }, [activeFile, frontendFiles, currentContent, isDirty]);\r\n\r\n  const handleEditorChange = (value: string | undefined) => {\r\n    if (value === undefined || !activeFile) return;\r\n\r\n    setCurrentContent(value);\r\n    setIsDirty(true);\r\n    onFileChange(activeFile, value); // Auto-save\r\n  };\r\n\r\n  const handleFileSelect = (path: string) => {\r\n    setActiveFile(path);\r\n    setCurrentContent(frontendFiles[path] || \"\");\r\n    setIsDirty(false);\r\n    onActiveFileChange(path);\r\n  };\r\n\r\n  const getLanguage = (path: string) => {\r\n    if (path.endsWith(\".tsx\") || path.endsWith(\".jsx\")) return \"typescript\";\r\n    if (path.endsWith(\".ts\")) return \"typescript\";\r\n    if (path.endsWith(\".js\")) return \"javascript\";\r\n    if (path.endsWith(\".css\")) return \"css\";\r\n    if (path.endsWith(\".json\")) return \"json\";\r\n    return \"plaintext\";\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex h-full bg-[#1e1e1e] text-white\">\r\n      {/* File Tree Sidebar */}\r\n      <div className=\"w-64 border-r border-[#3c3c3c]\">\r\n        <FileTree\r\n          project={project}\r\n          activeFile={activeFile}\r\n          onFileSelect={handleFileSelect}\r\n        />\r\n      </div>\r\n\r\n      {/* Editor Area */}\r\n      <div className=\"flex-1 flex flex-col\">\r\n        {/* Editor Header */}\r\n        <div className=\"h-10 bg-[#252526] border-b border-[#3c3c3c] flex items-center px-4 justify-between text-sm\">\r\n          <div className=\"flex items-center gap-2\">\r\n            <span className=\"text-blue-400\">≡ƒôä</span>\r\n            <span>{activeFile || \"No file selected\"}</span>\r\n            {isDirty && <span className=\"text-yellow-400\">ΓùÅ</span>}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Monaco Editor */}\r\n        <div className=\"flex-1\">\r\n          {activeFile ? (\r\n            <Editor\r\n              height=\"100%\"\r\n              defaultLanguage={getLanguage(activeFile)}\r\n              value={currentContent}\r\n              theme=\"vs-dark\"\r\n              onChange={handleEditorChange}\r\n              options={{\r\n                minimap: { enabled: false },\r\n                fontSize: 14,\r\n                lineNumbers: \"on\",\r\n                scrollBeyondLastLine: false,\r\n                automaticLayout: true,\r\n                padding: { top: 16 },\r\n              }}\r\n            />\r\n          ) : (\r\n            <div className=\"h-full flex items-center justify-center text-gray-500\">\r\n              Select a file from the tree\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Sarbajit\\Desktop\\rajnikant\\ai-builder\\components\\builder\\FileTree.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Sarbajit\\Desktop\\rajnikant\\ai-builder\\components\\builder\\PreviewPanel.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Sarbajit\\Desktop\\rajnikant\\ai-builder\\components\\builder\\PromptBox.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Sarbajit\\Desktop\\rajnikant\\ai-builder\\components\\builder\\TopBar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Sarbajit\\Desktop\\rajnikant\\ai-builder\\components\\layout\\SplitPanel.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Sarbajit\\Desktop\\rajnikant\\ai-builder\\components\\providers\\AuthProvider.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Sarbajit\\Desktop\\rajnikant\\ai-builder\\components\\ui\\Button.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Sarbajit\\Desktop\\rajnikant\\ai-builder\\components\\ui\\card.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Sarbajit\\Desktop\\rajnikant\\ai-builder\\eslint.config.mjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Sarbajit\\Desktop\\rajnikant\\ai-builder\\lib\\agent\\parseAgent.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Sarbajit\\Desktop\\rajnikant\\ai-builder\\lib\\ai\\codegen.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Sarbajit\\Desktop\\rajnikant\\ai-builder\\lib\\ai\\prompt.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Sarbajit\\Desktop\\rajnikant\\ai-builder\\lib\\db\\data-source.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Sarbajit\\Desktop\\rajnikant\\ai-builder\\lib\\db\\entities\\Project.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Sarbajit\\Desktop\\rajnikant\\ai-builder\\lib\\db\\entities\\ProjectVersion.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Sarbajit\\Desktop\\rajnikant\\ai-builder\\lib\\db\\entities\\User.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Sarbajit\\Desktop\\rajnikant\\ai-builder\\lib\\preview\\renderer.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Sarbajit\\Desktop\\rajnikant\\ai-builder\\lib\\projects.ts\\versioning.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Sarbajit\\Desktop\\rajnikant\\ai-builder\\lib\\utils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Sarbajit\\Desktop\\rajnikant\\ai-builder\\next.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Sarbajit\\Desktop\\rajnikant\\ai-builder\\postcss.config.mjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Sarbajit\\Desktop\\rajnikant\\ai-builder\\types\\project.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]
